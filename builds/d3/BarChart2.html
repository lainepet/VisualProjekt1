<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Min första visualisering med D3.js</title>
    <script src = "https://d3js.org/d3.v4.js"></script>
</head>
<body>

   <!-- <h1>Tidsresor med enter()</h1>-->

    <!--<div id="container" class="svg-container">
    </div>-->
    <!--Svg grafik som ska modifieras-->
<script>


    var dataTable = [70, 60, 70, 80, 90, 50];
  //var height = 200;
   var height = window.innerHeight;
    // var width = 400;
  var width = window.innerWidth;
    var barWidth = 65;
    //var barOffset = 5;
    var barMargin = 25;


    var yScale = d3.scaleLinear()
    .domain([0, d3.max(dataTable)])
    .range([0, height]);

    var xScale = d3.scaleLinear()
        .domain([0,d3.max(barMargin+barWidth*indexedDB)])
        .range([0,width]);
// Skapa SVG med JS
var canvas = d3.select("body")
    .append("svg")
    .attr("width", width)
    .attr("height", height)
    .style("background", "lightgrey");

    // Här börjar tidsresan
    canvas.selectAll("staplar")
        .data(dataTable) // fyll staplarna med datan som vi har

        // gå in i varje virtuella stapel
        .enter()
            .append("rect")
            .style("fill", "blue")
            .attr("width", barWidth)
            .attr("height", function(data){
                 return yScale(data); })

            .attr("x", function(data,i)
            {  return (barWidth + barMargin) * i;})

            .attr("y", function(data)
        { return height - yScale(data); });
        
        
        window.onresize = updateWindow();




        function updateWindow(){
            /*var svg = d3.select("div#container")
           // var canvas = d3.select("body")
            .append("svg")
            .attr("preserveAspectRatio", "xMinYMin meet")
            .attr("viewBox", "0 0 300 300")
            .classed("svg-content", true);*/

        
           height = window.innerHeight * 0.75;
           width = window.innerWidth * 0.75;
           //width = window.innerWidth;
          // height = window.innerHeight;

          canvas.attr("width",width)
            .attr("height",height)

            svg.selectAll("staplar")
        .data(dataTable)

        


        .enter()
            .append("rect")
            .style("fill", "blue")
            .attr("width",  barWidth)
            .attr("height", function(data){
                 return yScale(data); })

            .attr("x", function(data,i)
           {  return (barWidth + barMargin) * i;})
          // {  return xScale(data);})
            .attr("y", function(data)
        { return height - yScale(data); });
        }

</script>
          
    
</body>
</html>